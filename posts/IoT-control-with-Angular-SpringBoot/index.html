<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Full-stack IoT example" /><meta property="og:locale" content="en" /><meta name="description" content="Okay, the user wants a full functional implementation example for their IoT system using Angular, Spring Boot, and Docker, along with how to measure performance and capacity. Let me start by breaking down their needs. First, they need a complete example that integrates all the mentioned technologies. They’re working on a home automation project controlling garden irrigation, pool pump, lights, etc. The example should cover real-time updates using SSE, which I previously explained. They also want to know how to test the system’s performance and capacity. I should outline the architecture again briefly, then dive into the code. For the backend, Spring Boot will handle SSE, device management, and alerts. The frontend in Angular will display real-time data. Docker will containerize the backend and database. Including steps for each component: Spring Boot setup with SSE endpoints, Angular service and component for consuming SSE, Docker setup with PostgreSQL. Then, performance measurement using tools like JMeter, monitoring with Spring Boot Actuator and Prometheus/Grafana. I need to make sure the code examples are accurate and functional. For example, the SseEmitter in Spring Boot, Angular’s EventSource, and Docker Compose configuration. Also, explain how to use JMeter for load testing and interpret results like throughput and error rates. They might be looking for practical steps they can follow without much hassle, so clarity is key. Including commands for Docker, dependencies in pom.xml and package.json, and sample configurations will help them set things up quickly. For performance measurement, explaining tools and metrics clearly will help them understand how to assess their system’s limits. Mentioning scalability tips like horizontal scaling and connection pooling is important for capacity planning. I should also remind them about security aspects, even though the example is simplified. Maybe a note about adding authentication and using HTTPS in production. Finally, summarize the example and emphasize the importance of monitoring and scaling for a reliable system. Make sure the tone is encouraging and offers further help if needed." /><meta property="og:description" content="Okay, the user wants a full functional implementation example for their IoT system using Angular, Spring Boot, and Docker, along with how to measure performance and capacity. Let me start by breaking down their needs. First, they need a complete example that integrates all the mentioned technologies. They’re working on a home automation project controlling garden irrigation, pool pump, lights, etc. The example should cover real-time updates using SSE, which I previously explained. They also want to know how to test the system’s performance and capacity. I should outline the architecture again briefly, then dive into the code. For the backend, Spring Boot will handle SSE, device management, and alerts. The frontend in Angular will display real-time data. Docker will containerize the backend and database. Including steps for each component: Spring Boot setup with SSE endpoints, Angular service and component for consuming SSE, Docker setup with PostgreSQL. Then, performance measurement using tools like JMeter, monitoring with Spring Boot Actuator and Prometheus/Grafana. I need to make sure the code examples are accurate and functional. For example, the SseEmitter in Spring Boot, Angular’s EventSource, and Docker Compose configuration. Also, explain how to use JMeter for load testing and interpret results like throughput and error rates. They might be looking for practical steps they can follow without much hassle, so clarity is key. Including commands for Docker, dependencies in pom.xml and package.json, and sample configurations will help them set things up quickly. For performance measurement, explaining tools and metrics clearly will help them understand how to assess their system’s limits. Mentioning scalability tips like horizontal scaling and connection pooling is important for capacity planning. I should also remind them about security aspects, even though the example is simplified. Maybe a note about adding authentication and using HTTPS in production. Finally, summarize the example and emphasize the importance of monitoring and scaling for a reliable system. Make sure the tone is encouraging and offers further help if needed." /><link rel="canonical" href="https://gitjmc.github.io/posts/IoT-control-with-Angular-SpringBoot/" /><meta property="og:url" content="https://gitjmc.github.io/posts/IoT-control-with-Angular-SpringBoot/" /><meta property="og:site_name" content="JMC-memo" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-02-10T09:35:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Full-stack IoT example" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-02-23T17:20:43-05:00","datePublished":"2025-02-10T09:35:00-05:00","description":"Okay, the user wants a full functional implementation example for their IoT system using Angular, Spring Boot, and Docker, along with how to measure performance and capacity. Let me start by breaking down their needs. First, they need a complete example that integrates all the mentioned technologies. They’re working on a home automation project controlling garden irrigation, pool pump, lights, etc. The example should cover real-time updates using SSE, which I previously explained. They also want to know how to test the system’s performance and capacity. I should outline the architecture again briefly, then dive into the code. For the backend, Spring Boot will handle SSE, device management, and alerts. The frontend in Angular will display real-time data. Docker will containerize the backend and database. Including steps for each component: Spring Boot setup with SSE endpoints, Angular service and component for consuming SSE, Docker setup with PostgreSQL. Then, performance measurement using tools like JMeter, monitoring with Spring Boot Actuator and Prometheus/Grafana. I need to make sure the code examples are accurate and functional. For example, the SseEmitter in Spring Boot, Angular’s EventSource, and Docker Compose configuration. Also, explain how to use JMeter for load testing and interpret results like throughput and error rates. They might be looking for practical steps they can follow without much hassle, so clarity is key. Including commands for Docker, dependencies in pom.xml and package.json, and sample configurations will help them set things up quickly. For performance measurement, explaining tools and metrics clearly will help them understand how to assess their system’s limits. Mentioning scalability tips like horizontal scaling and connection pooling is important for capacity planning. I should also remind them about security aspects, even though the example is simplified. Maybe a note about adding authentication and using HTTPS in production. Finally, summarize the example and emphasize the importance of monitoring and scaling for a reliable system. Make sure the tone is encouraging and offers further help if needed.","headline":"Full-stack IoT example","mainEntityOfPage":{"@type":"WebPage","@id":"https://gitjmc.github.io/posts/IoT-control-with-Angular-SpringBoot/"},"url":"https://gitjmc.github.io/posts/IoT-control-with-Angular-SpringBoot/"}</script><title>Full-stack IoT example | JMC-memo</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="JMC-memo"><meta name="application-name" content="JMC-memo"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://gitjmc.github.io/assets/img/favicons/avatar.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">JMC-memo</a></div><div class="site-subtitle font-italic">À la demande de sisi</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/gitjmc" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Full-stack IoT example</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Full-stack IoT example</h1><div class="post-meta text-muted"><div> By <em> <a href="https://twitter.com/username">Jerbi Mohamed Chamseddine</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1739198100" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2025-02-10 </em> </span> <span> Updated <em class="timeago" data-ts="1740349243" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2025-02-23 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1332 words"> <em>7 min</em> read</span></div></div></div><div class="post-content"><blockquote><p>Okay, the user wants a full functional implementation example for their IoT system using Angular, Spring Boot, and Docker, along with how to measure performance and capacity. Let me start by breaking down their needs. First, they need a complete example that integrates all the mentioned technologies. They’re working on a home automation project controlling garden irrigation, pool pump, lights, etc. The example should cover real-time updates using SSE, which I previously explained. They also want to know how to test the system’s performance and capacity. I should outline the architecture again briefly, then dive into the code. For the backend, Spring Boot will handle SSE, device management, and alerts. The frontend in Angular will display real-time data. Docker will containerize the backend and database. Including steps for each component: Spring Boot setup with SSE endpoints, Angular service and component for consuming SSE, Docker setup with PostgreSQL. Then, performance measurement using tools like JMeter, monitoring with Spring Boot Actuator and Prometheus/Grafana. I need to make sure the code examples are accurate and functional. For example, the SseEmitter in Spring Boot, Angular’s EventSource, and Docker Compose configuration. Also, explain how to use JMeter for load testing and interpret results like throughput and error rates. They might be looking for practical steps they can follow without much hassle, so clarity is key. Including commands for Docker, dependencies in pom.xml and package.json, and sample configurations will help them set things up quickly. For performance measurement, explaining tools and metrics clearly will help them understand how to assess their system’s limits. Mentioning scalability tips like horizontal scaling and connection pooling is important for capacity planning. I should also remind them about security aspects, even though the example is simplified. Maybe a note about adding authentication and using HTTPS in production. Finally, summarize the example and emphasize the importance of monitoring and scaling for a reliable system. Make sure the tone is encouraging and offers further help if needed.</p></blockquote><p>Let’s build a <strong>full-stack example</strong> of a real-time IoT monitoring system using <strong>Angular</strong>, <strong>Spring Boot</strong>, and <strong>Docker</strong>, with <strong>Server-Sent Events (SSE)</strong> for updates. We’ll also cover <strong>performance testing</strong> and <strong>capacity measurement</strong>. Here’s the step-by-step implementation:</p><hr /><h3 id="1-system-overview"><span class="mr-2"><strong>1. System Overview</strong></span><a href="#1-system-overview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><strong>Backend</strong>: Spring Boot (Java) with SSE for real-time updates.<li><strong>Frontend</strong>: Angular for real-time dashboard.<li><strong>Database</strong>: PostgreSQL (via Docker).<li><strong>Monitoring</strong>: Prometheus + Grafana (for performance metrics).<li><strong>Deployment</strong>: Docker Compose.</ul><hr /><h3 id="2-backend-implementation-spring-boot"><span class="mr-2"><strong>2. Backend Implementation (Spring Boot)</strong></span><a href="#2-backend-implementation-spring-boot" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="step-1-project-setup"><span class="mr-2"><strong>Step 1: Project Setup</strong></span><a href="#step-1-project-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Create a Spring Boot project with these dependencies (<code class="language-plaintext highlighter-rouge">pom.xml</code>):</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="nt">&lt;dependencies&gt;</span>
    <span class="c">&lt;!-- Core --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- Database --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-jpa<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.postgresql<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>postgresql<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- Monitoring --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-actuator<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>io.micrometer<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>micrometer-registry-prometheus<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>
</pre></table></code></div></div><h4 id="step-2-sse-controller"><span class="mr-2"><strong>Step 2: SSE Controller</strong></span><a href="#step-2-sse-controller" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre><td class="rouge-code"><pre><span class="c1">// SseController.java</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.MediaType</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.mvc.method.annotation.SseEmitter</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.CopyOnWriteArrayList</span><span class="o">;</span>

<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/api/sse"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SseController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">CopyOnWriteArrayList</span><span class="o">&lt;</span><span class="nc">SseEmitter</span><span class="o">&gt;</span> <span class="n">emitters</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CopyOnWriteArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="n">produces</span> <span class="o">=</span> <span class="nc">MediaType</span><span class="o">.</span><span class="na">TEXT_EVENT_STREAM_VALUE</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">SseEmitter</span> <span class="nf">subscribe</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">SseEmitter</span> <span class="n">emitter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SseEmitter</span><span class="o">(</span><span class="nc">Long</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">);</span> <span class="c1">// No timeout</span>
        <span class="n">emitters</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">emitter</span><span class="o">);</span>

        <span class="n">emitter</span><span class="o">.</span><span class="na">onCompletion</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">emitters</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">emitter</span><span class="o">));</span>
        <span class="n">emitter</span><span class="o">.</span><span class="na">onTimeout</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">emitters</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">emitter</span><span class="o">));</span>

        <span class="c1">// Send initial message</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">emitter</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="nc">SseEmitter</span><span class="o">.</span><span class="na">event</span><span class="o">().</span><span class="na">data</span><span class="o">(</span><span class="s">"Connected!"</span><span class="o">));</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">emitter</span><span class="o">.</span><span class="na">completeWithError</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">emitter</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendEvent</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">SseEmitter</span> <span class="n">emitter</span> <span class="o">:</span> <span class="n">emitters</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">emitter</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="nc">SseEmitter</span><span class="o">.</span><span class="na">event</span><span class="o">().</span><span class="na">data</span><span class="o">(</span><span class="n">data</span><span class="o">));</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">emitters</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">emitter</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h4 id="step-3-device-simulation-service"><span class="mr-2"><strong>Step 3: Device Simulation Service</strong></span><a href="#step-3-device-simulation-service" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Simulate IoT device data and send SSE updates:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="c1">// DeviceSimulatorService.java</span>
<span class="kn">import</span> <span class="nn">org.springframework.scheduling.annotation.Scheduled</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>

<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DeviceSimulatorService</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">SseController</span> <span class="n">sseController</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">DeviceSimulatorService</span><span class="o">(</span><span class="nc">SseController</span> <span class="n">sseController</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">sseController</span> <span class="o">=</span> <span class="n">sseController</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Scheduled</span><span class="o">(</span><span class="n">fixedRate</span> <span class="o">=</span> <span class="mi">2000</span><span class="o">)</span> <span class="c1">// Send data every 2 seconds</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">simulateDeviceData</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">double</span> <span class="n">temperature</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">random</span><span class="o">()</span> <span class="o">*</span> <span class="mi">40</span><span class="o">;</span> <span class="c1">// Simulate temperature (0-40°C)</span>
        <span class="nc">String</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"{\"temperature\": %.2f}"</span><span class="o">,</span> <span class="n">temperature</span><span class="o">);</span>
        <span class="n">sseController</span><span class="o">.</span><span class="na">sendEvent</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h4 id="step-4-configure-postgresql"><span class="mr-2"><strong>Step 4: Configure PostgreSQL</strong></span><a href="#step-4-configure-postgresql" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Add to <code class="language-plaintext highlighter-rouge">application.properties</code>:</p><div class="language-properties highlighter-rouge"><div class="code-header"> <span data-label-text="Properties"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="py">spring.datasource.url</span><span class="p">=</span><span class="s">jdbc:postgresql://db:5432/iot</span>
<span class="py">spring.datasource.username</span><span class="p">=</span><span class="s">postgres</span>
<span class="py">spring.datasource.password</span><span class="p">=</span><span class="s">postgres</span>
<span class="py">spring.jpa.hibernate.ddl-auto</span><span class="p">=</span><span class="s">update</span>
</pre></table></code></div></div><hr /><h3 id="3-frontend-implementation-angular"><span class="mr-2"><strong>3. Frontend Implementation (Angular)</strong></span><a href="#3-frontend-implementation-angular" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="step-1-sse-service"><span class="mr-2"><strong>Step 1: SSE Service</strong></span><a href="#step-1-sse-service" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="c1">// sse.service.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">({</span>
  <span class="na">providedIn</span><span class="p">:</span> <span class="dl">'</span><span class="s1">root</span><span class="dl">'</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">SseService</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">eventSource</span><span class="p">:</span> <span class="nx">EventSource</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{}</span>

  <span class="nx">getServerSentEvents</span><span class="p">(</span><span class="nx">url</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">MessageEvent</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">Observable</span><span class="p">((</span><span class="nx">observer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">eventSource</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventSource</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">eventSource</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">observer</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
      <span class="p">};</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">eventSource</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">observer</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
      <span class="p">};</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">closeConnection</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">eventSource</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">eventSource</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h4 id="step-2-dashboard-component"><span class="mr-2"><strong>Step 2: Dashboard Component</strong></span><a href="#step-2-dashboard-component" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="c1">// dashboard.component.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span><span class="p">,</span> <span class="nx">OnDestroy</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">SseService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../sse.service</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Subscription</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-dashboard</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">template</span><span class="p">:</span> <span class="s2">`
    &lt;h1&gt;Real-Time Temperature&lt;/h1&gt;
    &lt;div *ngIf="temperature !== null"&gt;
      Current Temperature: {{ temperature }}°C
    &lt;/div&gt;
  `</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">DashboardComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span><span class="p">,</span> <span class="nx">OnDestroy</span> <span class="p">{</span>
  <span class="nl">temperature</span><span class="p">:</span> <span class="kr">number</span> <span class="o">|</span> <span class="kc">null</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="k">private</span> <span class="nx">sseSubscription</span><span class="o">!</span><span class="p">:</span> <span class="nx">Subscription</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">sseService</span><span class="p">:</span> <span class="nx">SseService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sseSubscription</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">sseService</span>
      <span class="p">.</span><span class="nx">getServerSentEvents</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://localhost:8080/api/sse</span><span class="dl">'</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
        <span class="na">next</span><span class="p">:</span> <span class="p">(</span><span class="na">event</span><span class="p">:</span> <span class="nx">MessageEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">temperature</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">temperature</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="na">error</span><span class="p">:</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">SSE error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">),</span>
      <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">ngOnDestroy</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sseSubscription</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sseService</span><span class="p">.</span><span class="nx">closeConnection</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><hr /><h3 id="4-docker-setup"><span class="mr-2"><strong>4. Docker Setup</strong></span><a href="#4-docker-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="docker-composeyml"><span class="mr-2"><strong>docker-compose.yml</strong></span><a href="#docker-composeyml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">backend</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">./backend</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">8080:8080"</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">SPRING_DATASOURCE_URL</span><span class="pi">:</span> <span class="s">jdbc:postgresql://db:5432/iot</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">db</span>

  <span class="na">db</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">postgres:13</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">POSTGRES_USER</span><span class="pi">:</span> <span class="s">postgres</span>
      <span class="na">POSTGRES_PASSWORD</span><span class="pi">:</span> <span class="s">postgres</span>
      <span class="na">POSTGRES_DB</span><span class="pi">:</span> <span class="s">iot</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">5432:5432"</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">pgdata:/var/lib/postgresql/data</span>

  <span class="na">prometheus</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">prom/prometheus</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">9090:9090"</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./prometheus.yml:/etc/prometheus/prometheus.yml</span>

  <span class="na">grafana</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">grafana/grafana</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">3000:3000"</span>

<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">pgdata</span><span class="pi">:</span>
</pre></table></code></div></div><h4 id="dockerfile-backend"><span class="mr-2"><strong>Dockerfile (Backend)</strong></span><a href="#dockerfile-backend" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-dockerfile highlighter-rouge"><div class="code-header"> <span data-label-text="Dockerfile"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">FROM</span><span class="s"> openjdk:17-jdk-slim</span>
<span class="k">WORKDIR</span><span class="s"> /app</span>
<span class="k">COPY</span><span class="s"> target/*.jar app.jar</span>
<span class="k">ENTRYPOINT</span><span class="s"> ["java", "-jar", "app.jar"]</span>
</pre></table></code></div></div><hr /><h3 id="5-performance-testing"><span class="mr-2"><strong>5. Performance Testing</strong></span><a href="#5-performance-testing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="tools"><span class="mr-2"><strong>Tools</strong>:</span><a href="#tools" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><ul><li><strong>JMeter</strong>: For load testing SSE connections.<li><strong>Prometheus + Grafana</strong>: For monitoring system metrics (CPU, memory, connections).<li><strong>Spring Boot Actuator</strong>: Exposes metrics endpoints.</ul><h4 id="step-1-enable-actuator-in-spring-boot"><span class="mr-2"><strong>Step 1: Enable Actuator in Spring Boot</strong></span><a href="#step-1-enable-actuator-in-spring-boot" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Add to <code class="language-plaintext highlighter-rouge">application.properties</code>:</p><div class="language-properties highlighter-rouge"><div class="code-header"> <span data-label-text="Properties"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="py">management.endpoints.web.exposure.include</span><span class="p">=</span><span class="s">health,metrics,prometheus</span>
</pre></table></code></div></div><h4 id="step-2-configure-prometheus"><span class="mr-2"><strong>Step 2: Configure Prometheus</strong></span><a href="#step-2-configure-prometheus" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Create <code class="language-plaintext highlighter-rouge">prometheus.yml</code>:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="na">global</span><span class="pi">:</span>
  <span class="na">scrape_interval</span><span class="pi">:</span> <span class="s">15s</span>

<span class="na">scrape_configs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">job_name</span><span class="pi">:</span> <span class="s1">'</span><span class="s">spring-boot'</span>
    <span class="na">metrics_path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">/actuator/prometheus'</span>
    <span class="na">static_configs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">targets</span><span class="pi">:</span> <span class="pi">[</span><span class="s1">'</span><span class="s">backend:8080'</span><span class="pi">]</span>
</pre></table></code></div></div><h4 id="step-3-run-jmeter-test"><span class="mr-2"><strong>Step 3: Run JMeter Test</strong></span><a href="#step-3-run-jmeter-test" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li><strong>Test Plan</strong>:<ul><li>Simulate 100 concurrent users connecting to <code class="language-plaintext highlighter-rouge">/api/sse</code>.<li>Measure <strong>throughput</strong>, <strong>response time</strong>, and <strong>error rate</strong>.</ul><li><strong>Results</strong>:<ul><li><strong>Throughput</strong>: Number of requests per second the system can handle.<li><strong>Latency</strong>: Average response time for SSE connections.<li><strong>Error Rate</strong>: Percentage of failed connections.</ul></ol><hr /><h3 id="6-capacity-measurement"><span class="mr-2"><strong>6. Capacity Measurement</strong></span><a href="#6-capacity-measurement" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><strong>Connection Limit</strong>: Test how many SSE connections your backend can handle (e.g., 10k connections).<li><strong>Resource Usage</strong>: Monitor CPU/memory usage under load (use <code class="language-plaintext highlighter-rouge">docker stats</code> or Grafana).<li><strong>Database Throughput</strong>: Measure PostgreSQL queries per second.</ul><h4 id="scaling-tips"><span class="mr-2"><strong>Scaling Tips</strong>:</span><a href="#scaling-tips" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><ul><li><strong>Horizontal Scaling</strong>: Deploy multiple backend instances behind a load balancer.<li><strong>Connection Pooling</strong>: Optimize PostgreSQL connection pooling with HikariCP.<li><strong>Asynchronous Processing</strong>: Use reactive programming (Spring WebFlux) for higher concurrency.</ul><hr /><h3 id="7-run-the-system"><span class="mr-2"><strong>7. Run the System</strong></span><a href="#7-run-the-system" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ol><li>Build the Spring Boot app:<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">cd </span>backend <span class="o">&amp;&amp;</span> mvn clean package
</pre></table></code></div></div><li>Start the stack:<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker-compose up <span class="nt">--build</span>
</pre></table></code></div></div><li>Access:<ul><li>Angular: <code class="language-plaintext highlighter-rouge">http://localhost:4200</code><li>Prometheus: <code class="language-plaintext highlighter-rouge">http://localhost:9090</code><li>Grafana: <code class="language-plaintext highlighter-rouge">http://localhost:3000</code></ul></ol><hr /><h3 id="8-final-notes"><span class="mr-2"><strong>8. Final Notes</strong></span><a href="#8-final-notes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><strong>Security</strong>: Add JWT authentication for SSE endpoints (not shown here for simplicity).<li><strong>Optimization</strong>: Use <code class="language-plaintext highlighter-rouge">@Async</code> in Spring Boot to handle SSE emitters non-blockingly.<li><strong>Alerting</strong>: Configure Grafana alerts for high CPU/memory usage or connection drops.</ul><p>This example gives you a foundation to build upon. Let me know if you need help with specific scenarios! 😊</p><h2 id="learn-more"><span class="mr-2">Learn More</span><a href="#learn-more" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>For more knowledge about Jekyll posts, visit the <a href="https://jekyllrb.com/docs/posts/">Jekyll Docs: Posts</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/architecture/'>Architecture</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/architecture/" class="post-tag no-text-decoration" >architecture</a> <a href="/tags/angular/" class="post-tag no-text-decoration" >angular</a> <a href="/tags/spring-boot/" class="post-tag no-text-decoration" >spring-boot</a> <a href="/tags/sse/" class="post-tag no-text-decoration" >sse</a> <a href="/tags/docker/" class="post-tag no-text-decoration" >docker</a> <a href="/tags/real-time/" class="post-tag no-text-decoration" >real-time</a> <a href="/tags/postgresql/" class="post-tag no-text-decoration" >postgreSQL</a> <a href="/tags/prometheus/" class="post-tag no-text-decoration" >prometheus</a> <a href="/tags/grafana/" class="post-tag no-text-decoration" >grafana</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Full-stack IoT example - JMC-memo&amp;url=https://gitjmc.github.io/posts/IoT-control-with-Angular-SpringBoot/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Full-stack IoT example - JMC-memo&amp;u=https://gitjmc.github.io/posts/IoT-control-with-Angular-SpringBoot/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://gitjmc.github.io/posts/IoT-control-with-Angular-SpringBoot/&amp;text=Full-stack IoT example - JMC-memo" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://gitjmc.github.io/posts/IoT-control-with-Angular-SpringBoot/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="http://service.weibo.com/share/share.php?title=Full-stack IoT example - JMC-memo&amp;url=https://gitjmc.github.io/posts/IoT-control-with-Angular-SpringBoot/" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/esp32/">ESP 32</a><li><a href="/posts/iot-project/">Iot Project with ESP 32</a><li><a href="/posts/secureFormQualtrics/">How to secure Form in Qualtrics</a><li><a href="/posts/mosquitto-tls/">Mosquitto with Docker Compose and Base Authentication & Let's Encrypt (DuckDNS)</a><li><a href="/posts/docker-install/">Install Docker on Deepin 20.x</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/tuto/">tuto</a> <a class="post-tag" href="/tags/angular/">angular</a> <a class="post-tag" href="/tags/dev/">dev</a> <a class="post-tag" href="/tags/access/">access</a> <a class="post-tag" href="/tags/nextcloud/">nextcloud</a> <a class="post-tag" href="/tags/real-time/">real-time</a> <a class="post-tag" href="/tags/wireguard/">wireguard</a> <a class="post-tag" href="/tags/api/">api</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/SSE/"><div class="card-body"> <em class="timeago small" data-ts="1739194500" > 2025-02-10 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Server-Sent Events (SSE)</h3><div class="text-muted small"><p> Server-Sent Events (SSE) is a lightweight, HTTP-based protocol for real-time, one-way communication from the server to the client. It’s ideal for scenarios where the server needs to push updates to...</p></div></div></a></div><div class="card"> <a href="/posts/iot-system-for-monitoring-a-dam-water-pumping-station/"><div class="card-body"> <em class="timeago small" data-ts="1739540100" > 2025-02-14 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>IoT system for monitoring a dam water pumping station (G)</h3><div class="text-muted small"><p> It seems like you’re asking about an IoT system for monitoring a dam water pumping station, which I’ll interpret as a setup to manage and monitor water pumping operations at a dam—covering aspects ...</p></div></div></a></div><div class="card"> <a href="/posts/setting-up-contoling-and-minotoring-an-iot-system/"><div class="card-body"> <em class="timeago small" data-ts="1739574720" > 2025-02-14 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Setting up, contoling and minotoring an IoT system (G)</h3><div class="text-muted small"><p> Setting up an IoT system to control and monitor your garden irrigation, pool pump, indoor/outdoor lights, heater, and other devices with Angular, Spring Boot, and Docker is a great choice, as these...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/SSE/" class="btn btn-outline-primary" prompt="Older"><p>Server-Sent Events (SSE)</p></a> <a href="/posts/Implementing-automated-alerts/" class="btn btn-outline-primary" prompt="Newer"><p>Implementing automated alerts</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Jerbi Mohamed Chamseddine</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/tuto/">tuto</a> <a class="post-tag" href="/tags/angular/">angular</a> <a class="post-tag" href="/tags/dev/">dev</a> <a class="post-tag" href="/tags/access/">access</a> <a class="post-tag" href="/tags/nextcloud/">nextcloud</a> <a class="post-tag" href="/tags/real-time/">real-time</a> <a class="post-tag" href="/tags/wireguard/">wireguard</a> <a class="post-tag" href="/tags/api/">api</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-REJ95ZFTQX"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-REJ95ZFTQX'); }); </script>
