<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="How Mutual TLS (mTLS) works" /><meta property="og:locale" content="en" /><meta name="description" content="Mutual TLS (mTLS) is a security protocol that ensures both the client and the server authenticate each other using TLS (Transport Layer Security) certificates. It adds an extra layer of security compared to standard TLS, where only the server is authenticated. Here’s a detailed explanation of how mTLS works:" /><meta property="og:description" content="Mutual TLS (mTLS) is a security protocol that ensures both the client and the server authenticate each other using TLS (Transport Layer Security) certificates. It adds an extra layer of security compared to standard TLS, where only the server is authenticated. Here’s a detailed explanation of how mTLS works:" /><link rel="canonical" href="https://gitjmc.github.io/posts/how-mutual-TLS-(mTLS)-works/" /><meta property="og:url" content="https://gitjmc.github.io/posts/how-mutual-TLS-(mTLS)-works/" /><meta property="og:site_name" content="JMC-memo" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-02-09T19:35:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="How Mutual TLS (mTLS) works" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-02-22T08:39:38-05:00","datePublished":"2025-02-09T19:35:00-05:00","description":"Mutual TLS (mTLS) is a security protocol that ensures both the client and the server authenticate each other using TLS (Transport Layer Security) certificates. It adds an extra layer of security compared to standard TLS, where only the server is authenticated. Here’s a detailed explanation of how mTLS works:","headline":"How Mutual TLS (mTLS) works","mainEntityOfPage":{"@type":"WebPage","@id":"https://gitjmc.github.io/posts/how-mutual-TLS-(mTLS)-works/"},"url":"https://gitjmc.github.io/posts/how-mutual-TLS-(mTLS)-works/"}</script><title>How Mutual TLS (mTLS) works | JMC-memo</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="JMC-memo"><meta name="application-name" content="JMC-memo"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://gitjmc.github.io/assets/img/favicons/avatar.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">JMC-memo</a></div><div class="site-subtitle font-italic">À la demande de sisi</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/gitjmc" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>How Mutual TLS (mTLS) works</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>How Mutual TLS (mTLS) works</h1><div class="post-meta text-muted"><div> By <em> <a href="https://twitter.com/username">Jerbi Mohamed Chamseddine</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1739147700" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2025-02-09 </em> </span> <span> Updated <em class="timeago" data-ts="1740231578" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2025-02-22 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="816 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><p><strong>Mutual TLS (mTLS)</strong> is a security protocol that ensures both the client and the server authenticate each other using TLS (Transport Layer Security) certificates. It adds an extra layer of security compared to standard TLS, where only the server is authenticated. Here’s a detailed explanation of how mTLS works:</p><hr /><h3 id="1-key-concepts"><span class="mr-2"><strong>1. Key Concepts</strong></span><a href="#1-key-concepts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><strong>TLS (Transport Layer Security)</strong>: A cryptographic protocol that ensures secure communication over a network.<li><strong>Certificates</strong>: Digital documents that verify the identity of a device or server.<li><strong>Certificate Authority (CA)</strong>: A trusted entity that issues and signs certificates.<li><strong>Public Key Infrastructure (PKI)</strong>: A framework for managing certificates and public-key encryption.</ul><hr /><h3 id="2-how-mtls-works"><span class="mr-2"><strong>2. How mTLS Works</strong></span><a href="#2-how-mtls-works" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>mTLS involves the following steps:</p><h4 id="step-1-certificate-setup"><span class="mr-2"><strong>Step 1: Certificate Setup</strong></span><a href="#step-1-certificate-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li><strong>Generate Certificates</strong>:<ul><li>A <strong>Certificate Authority (CA)</strong> generates a root certificate and private key.<li>The CA issues certificates for the server and each client (device).<li>Each certificate includes:<ul><li>A public key.<li>Identity information (e.g., server name, device ID).<li>A digital signature from the CA.</ul></ul><li><strong>Distribute Certificates</strong>:<ul><li>The server and clients are configured with their respective certificates and private keys.<li>The CA’s root certificate is distributed to all parties to establish trust.</ul></ol><h4 id="step-2-tls-handshake"><span class="mr-2"><strong>Step 2: TLS Handshake</strong></span><a href="#step-2-tls-handshake" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>When a client (device) connects to the server, the following steps occur:</p><ol><li><strong>Client Hello</strong>:<ul><li>The client sends a “Client Hello” message to the server, indicating supported TLS versions and cipher suites.</ul><li><strong>Server Hello</strong>:<ul><li>The server responds with a “Server Hello” message, selecting the TLS version and cipher suite.<li>The server sends its certificate to the client.</ul><li><strong>Client Verification</strong>:<ul><li>The client verifies the server’s certificate using the CA’s root certificate.<li>If the server’s certificate is valid, the client generates a <strong>pre-master secret</strong>, encrypts it with the server’s public key, and sends it to the server.</ul><li><strong>Server Verification</strong>:<ul><li>The server requests the client’s certificate.<li>The client sends its certificate to the server.<li>The server verifies the client’s certificate using the CA’s root certificate.</ul><li><strong>Key Exchange</strong>:<ul><li>Both the client and server use the pre-master secret to generate a shared <strong>session key</strong>.<li>This session key is used to encrypt and decrypt data during the session.</ul><li><strong>Secure Communication</strong>:<ul><li>Once the handshake is complete, both parties use the session key to encrypt and decrypt data.</ul></ol><hr /><h3 id="3-benefits-of-mtls"><span class="mr-2"><strong>3. Benefits of mTLS</strong></span><a href="#3-benefits-of-mtls" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><strong>Strong Authentication</strong>: Ensures both the client and server are who they claim to be.<li><strong>Data Integrity</strong>: Prevents tampering with data during transmission.<li><strong>Confidentiality</strong>: Encrypts data to prevent eavesdropping.<li><strong>Prevents Impersonation</strong>: Protects against man-in-the-middle (MITM) attacks.</ul><hr /><h3 id="4-use-cases-for-mtls"><span class="mr-2"><strong>4. Use Cases for mTLS</strong></span><a href="#4-use-cases-for-mtls" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><strong>IoT Devices</strong>: Authenticating devices in an IoT ecosystem.<li><strong>Microservices</strong>: Securing communication between microservices in a distributed system.<li><strong>APIs</strong>: Protecting sensitive APIs (e.g., financial or healthcare systems).<li><strong>VPNs</strong>: Establishing secure connections in virtual private networks.</ul><hr /><h3 id="5-example-implementing-mtls"><span class="mr-2"><strong>5. Example: Implementing mTLS</strong></span><a href="#5-example-implementing-mtls" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Here’s how you can set up mTLS for a server and client:</p><h4 id="step-1-generate-certificates"><span class="mr-2"><strong>Step 1: Generate Certificates</strong></span><a href="#step-1-generate-certificates" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li><strong>Generate CA Certificate</strong>:<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>openssl req <span class="nt">-new</span> <span class="nt">-x509</span> <span class="nt">-days</span> 365 <span class="nt">-extensions</span> v3_ca <span class="nt">-keyout</span> ca.key <span class="nt">-out</span> ca.crt
</pre></table></code></div></div><li><strong>Generate Server Certificate</strong>:<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>openssl genrsa <span class="nt">-out</span> server.key 2048
openssl req <span class="nt">-new</span> <span class="nt">-out</span> server.csr <span class="nt">-key</span> server.key
openssl x509 <span class="nt">-req</span> <span class="nt">-in</span> server.csr <span class="nt">-CA</span> ca.crt <span class="nt">-CAkey</span> ca.key <span class="nt">-CAcreateserial</span> <span class="nt">-out</span> server.crt <span class="nt">-days</span> 365
</pre></table></code></div></div><li><strong>Generate Client Certificate</strong>:<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>openssl genrsa <span class="nt">-out</span> client.key 2048
openssl req <span class="nt">-new</span> <span class="nt">-out</span> client.csr <span class="nt">-key</span> client.key
openssl x509 <span class="nt">-req</span> <span class="nt">-in</span> client.csr <span class="nt">-CA</span> ca.crt <span class="nt">-CAkey</span> ca.key <span class="nt">-CAcreateserial</span> <span class="nt">-out</span> client.crt <span class="nt">-days</span> 365
</pre></table></code></div></div></ol><h4 id="step-2-configure-the-server"><span class="mr-2"><strong>Step 2: Configure the Server</strong></span><a href="#step-2-configure-the-server" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>For example, in <strong>Node.js</strong> with the <code class="language-plaintext highlighter-rouge">https</code> module:</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">key</span><span class="p">:</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">server.key</span><span class="dl">'</span><span class="p">),</span>
  <span class="na">cert</span><span class="p">:</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">server.crt</span><span class="dl">'</span><span class="p">),</span>
  <span class="na">ca</span><span class="p">:</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">ca.crt</span><span class="dl">'</span><span class="p">),</span> <span class="c1">// CA certificate</span>
  <span class="na">requestCert</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// Require client certificate</span>
  <span class="na">rejectUnauthorized</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// Reject unauthorized clients</span>
<span class="p">};</span>

<span class="nx">https</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello, world!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">443</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Server running on port 443</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</pre></table></code></div></div><h4 id="step-3-configure-the-client"><span class="mr-2"><strong>Step 3: Configure the Client</strong></span><a href="#step-3-configure-the-client" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>For example, in <strong>Node.js</strong> with the <code class="language-plaintext highlighter-rouge">https</code> module:</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">hostname</span><span class="p">:</span> <span class="dl">'</span><span class="s1">example.com</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">port</span><span class="p">:</span> <span class="mi">443</span><span class="p">,</span>
  <span class="na">path</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">key</span><span class="p">:</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">client.key</span><span class="dl">'</span><span class="p">),</span>
  <span class="na">cert</span><span class="p">:</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">client.crt</span><span class="dl">'</span><span class="p">),</span>
  <span class="na">ca</span><span class="p">:</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">ca.crt</span><span class="dl">'</span><span class="p">),</span> <span class="c1">// CA certificate</span>
  <span class="na">rejectUnauthorized</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// Reject unauthorized servers</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</pre></table></code></div></div><hr /><h3 id="6-tools-for-mtls"><span class="mr-2"><strong>6. Tools for mTLS</strong></span><a href="#6-tools-for-mtls" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><strong>OpenSSL</strong>: For generating and managing certificates.<li><strong>NGINX</strong>: For configuring mTLS in web servers.<li><strong>Kubernetes</strong>: For securing communication between microservices.<li><strong>Mosquitto</strong>: For MQTT-based IoT systems.</ul><hr /><h3 id="7-challenges-of-mtls"><span class="mr-2"><strong>7. Challenges of mTLS</strong></span><a href="#7-challenges-of-mtls" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><strong>Certificate Management</strong>: Requires a robust system for issuing, renewing, and revoking certificates.<li><strong>Complexity</strong>: Adds complexity to the setup and maintenance of the system.<li><strong>Performance Overhead</strong>: Slightly increases latency due to the TLS handshake.</ul><hr /><p>If you’d like, I can help you set up mTLS for your specific use case (e.g., IoT devices, microservices, or APIs). Let me know! 😊</p><h2 id="learn-more"><span class="mr-2">Learn More</span><a href="#learn-more" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>For more knowledge about Jekyll posts, visit the <a href="https://jekyllrb.com/docs/posts/">Jekyll Docs: Posts</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/architecture/'>Architecture</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/mtls/" class="post-tag no-text-decoration" >mtls</a> <a href="/tags/protocol/" class="post-tag no-text-decoration" >protocol</a> <a href="/tags/certificate/" class="post-tag no-text-decoration" >certificate</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=How Mutual TLS (mTLS) works - JMC-memo&amp;url=https://gitjmc.github.io/posts/how-mutual-TLS-(mTLS)-works/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=How Mutual TLS (mTLS) works - JMC-memo&amp;u=https://gitjmc.github.io/posts/how-mutual-TLS-(mTLS)-works/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://gitjmc.github.io/posts/how-mutual-TLS-(mTLS)-works/&amp;text=How Mutual TLS (mTLS) works - JMC-memo" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://gitjmc.github.io/posts/how-mutual-TLS-(mTLS)-works/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="http://service.weibo.com/share/share.php?title=How Mutual TLS (mTLS) works - JMC-memo&amp;url=https://gitjmc.github.io/posts/how-mutual-TLS-(mTLS)-works/" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/secureFormQualtrics/">How to secure Form in Qualtrics</a><li><a href="/posts/mosquitto-tls/">Mosquitto with Docker Compose and Base Authentication & Let's Encrypt (DuckDNS)</a><li><a href="/posts/common-cli/">Common CLI on linux</a><li><a href="/posts/docker-install/">Install Docker on Deepin 20.x</a><li><a href="/posts/docker-install-ubuntu/">Install Docker on ubuntu and Deepin</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/tuto/">tuto</a> <a class="post-tag" href="/tags/angular/">angular</a> <a class="post-tag" href="/tags/dev/">dev</a> <a class="post-tag" href="/tags/access/">access</a> <a class="post-tag" href="/tags/nextcloud/">nextcloud</a> <a class="post-tag" href="/tags/real-time/">real-time</a> <a class="post-tag" href="/tags/wireguard/">wireguard</a> <a class="post-tag" href="/tags/api/">api</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/mtls-between-backend-and-frontend-application/"><div class="card-body"> <em class="timeago small" data-ts="1739118900" > 2025-02-09 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Using Mutual TLS (mTLS) between backend server and frontend application</h3><div class="text-muted small"><p> Yes, it is technically possible to use Mutual TLS (mTLS) between a backend server and a frontend application like an Angular Single Page Application (SPA). However, there are some challenges and co...</p></div></div></a></div><div class="card"> <a href="/posts/social-media-access-corpo/"><div class="card-body"> <em class="timeago small" data-ts="1735778100" > 2025-01-01 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Manage access to social media accounts in large enterprise</h3><div class="text-muted small"><p> Managing access to multiple social media accounts in a large enterprise requires a combination of tools, policies, and best practices to ensure security, efficiency, and consistency. Below is a com...</p></div></div></a></div><div class="card"> <a href="/posts/gdq-architecture/"><div class="card-body"> <em class="timeago small" data-ts="1736382900" > 2025-01-08 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>GDQ solution</h3><div class="text-muted small"><p> To design a modular Spring Boot application where external applications can selectively use specific modules (task jobs) from your application, you can follow a microservices-based architecture or ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/home-system-control/" class="btn btn-outline-primary" prompt="Older"><p>Home system control</p></a> <a href="/posts/how-the-service-can-authenticates-the-device/" class="btn btn-outline-primary" prompt="Newer"><p>How the service can authenticates the device</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Jerbi Mohamed Chamseddine</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/tuto/">tuto</a> <a class="post-tag" href="/tags/angular/">angular</a> <a class="post-tag" href="/tags/dev/">dev</a> <a class="post-tag" href="/tags/access/">access</a> <a class="post-tag" href="/tags/nextcloud/">nextcloud</a> <a class="post-tag" href="/tags/real-time/">real-time</a> <a class="post-tag" href="/tags/wireguard/">wireguard</a> <a class="post-tag" href="/tags/api/">api</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-REJ95ZFTQX"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-REJ95ZFTQX'); }); </script>
